// Audit Log Component Styles

.header-title {
  color: #374151;
  font-weight: 600;
}

.margin-left-auto {
  margin-left: auto;
}

// Global Controls Styling
.global-controls {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  
  .flex {
    gap: 0.5rem;
  }
}

// Collapsible Animations
@keyframes slideDown {
  from {
    max-height: 0;
    opacity: 0;
  }
  to {
    max-height: 1000px;
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    max-height: 1000px;
    opacity: 1;
  }
  to {
    max-height: 0;
    opacity: 0;
  }
}

.animate-slideDown {
  animation: slideDown 0.3s ease-out forwards;
}

.animate-slideUp {
  animation: slideUp 0.3s ease-in forwards;
}

.visualizza-valori-wrapper {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

// Details Content Styling
.details-content {
  .changes-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .change-item {
    border-radius: 8px;
    border: 1px solid transparent;
    height: 100%;
    
    &.old-change {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border-color: #fecaca;
    }
    
    &.new-change {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      border-color: #bbf7d0;
    }
    
    .change-header {
      display: flex;
      align-items: center;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      background: rgba(255, 255, 255, 0.5);
      border-radius: 8px 8px 0 0;
      
      .change-label {
        font-weight: 600;
        font-size: 0.875rem;
        color: #374151;
      }
      
      .field-name-inline {
        margin-left: auto;
        background: rgba(99, 102, 241, 0.1);
        color: #4338ca;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        font-family: 'JetBrains Mono', 'Fira Code', monospace;
      }
    }
  }
}

// JSON Container Styles
.json-container {
  padding: 1rem;
  font-family: 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
  font-size: 0.875rem;
  line-height: 1.6;
  border-radius: 0 0 8px 8px;
  background: rgba(255, 255, 255, 0.8);
  border: none;
  overflow: visible; // Remove scrollbars
  white-space: pre-wrap;
  word-break: break-word;
  
  // Syntax highlighting for JSON
  ::ng-deep {
    .json-key {
      color: #1e40af; // Blue-800
      font-weight: 600;
    }
    
    .json-string {
      color: #059669; // Emerald-600
    }
    
    .json-number {
      color: #dc2626; // Red-600
      font-weight: 500;
    }
    
    .json-boolean {
      color: #7c3aed; // Violet-600
      font-weight: 600;
    }
    
    .json-null {
      color: #6b7280; // Gray-500
      font-style: italic;
    }
  }
}

// Field name styling
.field-name {
  color: #374151;
  font-weight: 600;
  white-space: nowrap;
}

// Responsive improvements
@media (max-width: 768px) {
  .json-container {
    font-size: 0.75rem; // Increased mobile font size too
    max-height: 200px;
  }
}

// Grouped Logs Styling
.grouped-logs-container {
  .log-group {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    overflow: hidden;
    border: 1px solid #e5e7eb;
    
    .group-header {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border-bottom: 1px solid #e2e8f0;
      padding: 1rem 1.5rem;
      transition: all 0.2s ease;
      
      &:hover {
        background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      }
      
      &.cursor-pointer {
        user-select: none;
      }
      
      .group-id {
        .font-mono {
          color: #4338ca;
          font-size: 1rem;
        }
      }
      
      .group-timestamp {
        color: #374151;
        font-weight: 500;
      }
      
      .group-operations {
        color: #059669;
        font-weight: 500;
      }
      
             .group-count {
         .pi {
           color: #6b7280;
           font-size: 0.875rem;
           transition: transform 0.2s ease;
         }
         
         span {
           color: #4b5563;
           font-weight: 500;
         }
       }
    }
    
    .group-content {
      background: white;
      transition: all 0.3s ease;
      
      &.hidden {
        display: none;
      }
      
      .consolidated-changes {
        // Apply change item styling for consolidated view
        .additional-data {
            background: linear-gradient(
                135deg,
                #dbeafe 0%,
                #bfdbfe 100%);
            border: 1px solid #93c5fd;
            
            &.json-container {
                //background: rgba(130, 240, 255, 0.8);
                border-left: 4px solid #007bff;
                height: 100%;
            }
        }

        .change-item {
          border-radius: 8px;
          border: 1px solid transparent;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          
          &.old-change {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-color: #fecaca;
            border-width: 2px;
            
            .json-container {
              background: rgba(254, 242, 242, 0.8);
              border-left: 4px solid #dc2626;
              height: 100%;
            }
          }
          
          &.new-change {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-color: #bbf7d0;
            border-width: 2px;
            
            .json-container {
              background: rgba(240, 253, 244, 0.8);
              border-left: 4px solid #059669;
              height: 100%;
            }
          }
          
          &.additional-data {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-color: #93c5fd;
            border-width: 2px;
            
            .json-container {
              background: rgba(239, 246, 255, 0.8);
              border-left: 4px solid #3b82f6;
              height: 100%;
            }
          }
          
          .change-header {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.5);
            border-radius: 8px 8px 0 0;
            
            .change-label {
              font-weight: 600;
              font-size: 0.875rem;
              color: #374151;
            }
            
            .field-count {
              margin-left: auto;
              background: rgba(107, 114, 128, 0.1);
              color: #4b5563;
              padding: 0.25rem 0.5rem;
              border-radius: 4px;
              font-size: 0.75rem;
              font-weight: 500;
              font-family: sans-serif;
            }
          }
        }
        
        // Optimize layout for single value scenarios
        .changes-comparison {
          // When only one value type exists, center and limit width
          &.md\\:grid-cols-1 {
            .change-item {
              max-width: 800px;
              margin: 0 auto;
            }
          }
        }
        
        .record-changes {
          .change-item {
            width: 100%;
          }
        }
        
        .no-changes {
          color: #6b7280;
          font-style: italic;
        }
      }
    }
  }
}

// Better spacing and organization
.space-y-3 > * + * {
  margin-top: 0.75rem;
}

// Enhanced grid layout for better responsive behavior
@media (max-width: 1024px) {
  .grouped-logs-container {
    .log-group {
      margin: 0 -0.5rem;
      border-radius: 8px;
    }
    
    .group-header {
      padding: 1rem !important;
      
      .flex {
        flex-direction: column;
        align-items: flex-start !important;
        gap: 0.75rem;
        
        .group-count {
          align-self: flex-end;
        }
      }
    }
    
    .consolidated-changes {
      .changes-comparison {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
        
        .change-item {
          margin-bottom: 0.5rem;
          max-width: 100% !important;
          margin-left: 0 !important;
          margin-right: 0 !important;
        }
      }
      
      .record-changes {
        margin-top: 1rem !important;
      }
    }
  }
}

// Very small screens
@media (max-width: 640px) {
  .grouped-logs-container {
    .group-header {
      .flex {
        .gap-4 {
          flex-direction: column;
          align-items: flex-start !important;
          gap: 0.5rem;
        }
      }
    }
    
    .json-container {
      font-size: 0.75rem !important;
      padding: 0.75rem !important;
    }
    
    .change-header {
      padding: 0.5rem 0.75rem !important;
      
      .field-name-inline, .field-count {
        margin-left: 0 !important;
        margin-top: 0.25rem;
      }
    }
    
    .consolidated-changes {
      .changes-comparison {
        gap: 0.75rem !important;
      }
    }
  }
}

// Loading skeleton improvements
.space-y-4 > * + * {
  margin-top: 1rem;
}

// Improve user agent display
.break-all {
  word-break: break-all;
  line-height: 1.3;
}
